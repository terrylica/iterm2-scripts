# SSoT-OK: Tool versions
# Note: Set GH_TOKEN/GITHUB_TOKEN in .mise.local.toml (gitignored) for releases

[tools]
python = "3.13"
uv = "latest"

[tasks.setup]
description = "Run setup script"
run = "bash setup.sh"

[tasks.test-aliases]
description = "Test shell alias introspection"
run = "python3 -c \"import subprocess; print(subprocess.run(['zsh', '-ic', 'alias -L'], capture_output=True, text=True, timeout=2).stdout[:500])\""

[tasks.build]
description = "Build workspace-launcher.py from src/ modules"
run = "python build.py"

[tasks.build-check]
description = "Verify built output matches source modules"
run = "python build.py --check"

[tasks.release]
description = "Run semantic-release (dry-run)"
run = "/usr/bin/env bash -c 'npx semantic-release --dry-run'"

[tasks."release:full"]
description = "Run semantic-release (actual release)"
run = "/usr/bin/env bash -c 'npx semantic-release --no-ci'"
